import{j as a,c as r}from"./utils-DLq8OvKD.js";import{r as d}from"./iframe-BGb_N7Xc.js";import{u as L,a as z,b as A,F as B}from"./index.esm-BTdi0Uv1.js";const m=d.forwardRef(({name:t,label:n,options:p,className:V,containerClassName:_,isClearable:k,onFocus:h,onBlur:v,...o},T)=>{var C,S,F,j;const[q,i]=d.useState(!1),[f,b]=d.useState(!1),x=d.useRef(null),s=L(),g=s==null?void 0:s.control,R=g&&t?z({control:g,name:t}):void 0,c=o.value??R??"",y=(F=(S=(C=s==null?void 0:s.formState)==null?void 0:C.errors)==null?void 0:S[t])==null?void 0:F.message,D=q||!!c;d.useEffect(()=>{const e=u=>{x.current&&!x.current.contains(u.target)&&(b(!1),i(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const I=()=>{b(e=>!e),i(!0)},P=e=>{i(!0),h&&h(e)},W=e=>{v&&v(e)};return a.jsxs("div",{className:r("relative",_),ref:x,children:[a.jsxs("div",{id:o.id||t,tabIndex:0,role:"button","aria-haspopup":"listbox","aria-expanded":f,className:r("peer flex items-center h-12 w-full border border-[var(--primary,#2563eb)] rounded-md bg-[var(--input-bg,#fff)] text-[var(--input-text,#222)] px-3 py-3 text-sm transition focus:outline-none focus:border-[var(--primary,#2563eb)] disabled:cursor-not-allowed disabled:opacity-50 appearance-none cursor-pointer relative",V),onClick:I,onFocus:P,onBlur:W,ref:T,children:[a.jsx("span",{className:r("block truncate",!c&&"text-gray-400"),children:((j=p.find(e=>e.value===c))==null?void 0:j.label)||!n&&"Selecione..."}),k&&c&&a.jsx("button",{type:"button",tabIndex:-1,"aria-label":"Limpar seleção",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 bg-transparent p-1 rounded-full focus:outline-none",onClick:e=>{if(e.stopPropagation(),s&&t&&s.setValue(t,""),o.onChange){const u={target:{value:""}};o.onChange(u)}b(!1),i(!1)},children:"✕"})]}),n&&a.jsx("label",{htmlFor:o.id||t,className:r("absolute left-3 z-10 origin-[0] cursor-text select-none text-sm text-gray-400 transition-all duration-200",D?"top-0 scale-90 -translate-y-1 text-xs text-[var(--primary,#2563eb)] p-1 rounded-full bg-white":"top-3 scale-100 translate-y-0.5"),children:n}),a.jsx("div",{className:r("absolute left-0 w-full mt-1 rounded-md shadow-lg bg-white z-20 transition-all duration-200 overflow-hidden",f?"border border-[var(--primary,#2563eb)] max-h-36 opacity-100 scale-100":"max-h-0 opacity-0 scale-95 pointer-events-none"),style:{maxHeight:f?"9.5rem":"0",overflowY:p.length>3?"auto":"hidden"},children:p.map(e=>a.jsx("div",{className:r("px-3 py-2 cursor-pointer hover:bg-blue-50 text-sm",c===e.value&&"bg-blue-100"),onMouseDown:()=>{if(s&&t&&s.setValue(t,e.value),o.onChange){const u={target:{value:e.value}};o.onChange(u)}i(!0)},children:e.label},e.value))}),y&&a.jsx("span",{className:"text-red-500 text-xs mt-1 block",children:y})]})});m.displayName="Select";m.__docgenInfo={description:"",methods:[],displayName:"Select",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"SelectOption"}],raw:"SelectOption[]"},description:""},containerClassName:{required:!1,tsType:{name:"string"},description:""},isClearable:{required:!1,tsType:{name:"boolean"},description:""}}};const Y={title:"Components/Select",component:m,argTypes:{isClearable:{control:"boolean",description:"Exibe botão para limpar a seleção",defaultValue:!1}}},E=[{label:"Opção 1",value:"1"},{label:"Opção 2",value:"2"},{label:"Opção 3",value:"3"},{label:"Opção 4",value:"4"},{label:"Opção 5",value:"5"}],l=t=>{const n=A({defaultValues:{select:""}});return a.jsx(B,{...n,children:a.jsx("form",{style:{maxWidth:320},children:a.jsx(m,{label:t.label||"Selecione uma opção",isClearable:t.isClearable??!1,...t,name:t.name||"select",options:t.options||E})})})};l.args={name:"select",options:E,label:"Selecione uma opção",isClearable:!1};l.__docgenInfo={description:"",methods:[],displayName:"Default"};var w,N,O;l.parameters={...l.parameters,docs:{...(w=l.parameters)==null?void 0:w.docs,source:{originalSource:`args => {
  const methods: UseFormReturn<FormValues> = useForm<FormValues>({
    defaultValues: {
      select: ""
    }
  });
  return <FormProvider {...methods}>
      <form style={{
      maxWidth: 320
    }}>
        <Select label={args.label || "Selecione uma opção"} isClearable={args.isClearable ?? false} {...args} name={args.name || "select"} options={args.options || options} />
      </form>
    </FormProvider>;
}`,...(O=(N=l.parameters)==null?void 0:N.docs)==null?void 0:O.source}}};const G=["Default"];export{l as Default,G as __namedExportsOrder,Y as default};
