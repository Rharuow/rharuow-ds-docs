import{r as t}from"./iframe-DExB8K4I.js";import{u as re,a as se}from"./index.esm-BWrmrYm5.js";import{c}from"./utils-CuF-iVWQ.js";const D=t.forwardRef(({name:r,label:w,options:u,className:z,containerClassName:W,isClearable:A,searchable:s=!1,filterPlaceholder:H="Digite para filtrar...",caseSensitive:T=!1,filterFunction:$,onFocus:g,onBlur:b,...i},_)=>{var P,I,M,R;const[Y,d]=t.useState(!1),[o,p]=t.useState(!1),[f,k]=t.useState(""),[y,j]=t.useState({top:0,left:0,width:0}),m=t.useRef(null),G=t.useRef(null),a=re(),F=a==null?void 0:a.control,J=F&&r?se({control:F,name:r}):void 0,l=i.value??J??"",L=(M=(I=(P=a==null?void 0:a.formState)==null?void 0:P.errors)==null?void 0:I[r])==null?void 0:M.message,K=$||((e,n)=>{const x=T?e.label:e.label.toLowerCase(),C=T?n:n.toLowerCase();return x.includes(C)}),q=f.trim()?u.filter(e=>K(e,f.trim())):u,E=u.find(e=>e.value===l),Q=s&&o?f:(E==null?void 0:E.label)||"",U=Y||!!l||s&&!!f,O=t.useCallback(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768,[]),h=t.useCallback(()=>{if(m.current&&o){const e=m.current.getBoundingClientRect(),n=O(),x=window.innerHeight,C=window.innerWidth,v=152;let S=e.bottom+4,N=e.left;if(n){const V=x-e.bottom,oe=e.top;V<v&&oe>v&&(S=e.top-v-4);const B=16,ae=C-e.width-B;N=Math.min(Math.max(N,B),ae)}else x-e.bottom<v&&(S=e.top-v-4);j({top:S,left:N,width:e.width})}},[o,O]);t.useEffect(()=>{if(h(),o){const e=()=>h(),n=()=>h();return window.addEventListener("resize",e),window.addEventListener("scroll",n,!0),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",n,!0)}}},[o,h]),t.useEffect(()=>{const e=n=>{m.current&&!m.current.contains(n.target)&&(p(!1),d(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const X=()=>{p(e=>!e),d(!0)},Z=e=>{d(!0),g&&g(e)},ee=e=>{b&&b(e)},te=e=>{k(e.target.value)},ne=e=>{if(a&&r&&a.setValue(r,e),i.onChange){const n={target:{value:e}};i.onChange(n)}p(!1),d(!1),k("")};return t.createElement("div",{className:c("relative",W),ref:m},t.createElement("div",{id:i.id||r,tabIndex:0,role:"button","aria-haspopup":"listbox","aria-expanded":o,className:c("peer flex items-center h-12 w-full border border-[var(--primary,#2563eb)] rounded-md bg-[var(--input-bg,#fff)] text-[var(--input-text,#222)] px-3 py-3 text-sm transition focus:outline-none focus:border-[var(--primary,#2563eb)] disabled:cursor-not-allowed disabled:opacity-50 appearance-none cursor-pointer relative",z),onClick:s?void 0:X,onFocus:s?void 0:Z,onBlur:s?void 0:ee,ref:_},s?t.createElement("input",{ref:G,type:"text",value:Q,onChange:te,onFocus:s?e=>{d(!0),p(!0),g&&g(e)}:void 0,onBlur:s?e=>{b&&b(e)}:void 0,placeholder:w?"":H||"Selecione...",className:c("w-full bg-transparent border-none outline-none text-sm",!l&&!f&&"text-gray-400")}):t.createElement("span",{className:c("block truncate",!l&&"text-gray-400")},((R=u.find(e=>e.value===l))==null?void 0:R.label)||!w&&"Selecione..."),A&&l&&t.createElement("button",{type:"button",tabIndex:-1,"aria-label":"Limpar seleção",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 bg-transparent p-1 rounded-full focus:outline-none",onClick:e=>{if(e.stopPropagation(),a&&r&&a.setValue(r,""),i.onChange){const n={target:{value:""}};i.onChange(n)}p(!1),d(!1)}},"✕")),w&&t.createElement("label",{htmlFor:i.id||r,className:c("absolute left-3 z-10 origin-[0] cursor-text select-none text-sm text-gray-400 transition-all duration-200",U?"top-0 scale-90 -translate-y-1 text-xs text-[var(--primary,#2563eb)] p-1 rounded-full bg-white":"top-3 scale-100 translate-y-0.5")},w),t.createElement("div",{className:c("absolute left-0 w-full mt-1 rounded-md transition-all duration-200 overflow-hidden","bg-[var(--select-dropdown-bg)] border-[var(--select-dropdown-border)] text-[var(--select-dropdown-text)]",o?"border max-h-36 opacity-100 scale-100":"max-h-0 opacity-0 scale-95 pointer-events-none"),style:{maxHeight:o?"9.5rem":"0",overflowY:u.length>3?"auto":"hidden",position:"fixed",top:o?`${y.top}px`:"auto",left:o?`${y.left}px`:"auto",width:o?`${y.width}px`:"auto",zIndex:9999,boxShadow:o?"var(--select-dropdown-shadow)":"none"}},q.length===0?t.createElement("div",{className:"px-3 py-2 text-sm text-gray-500 text-center"},"Nenhuma opção encontrada"):q.map(e=>t.createElement("div",{key:e.value,className:c("px-3 py-2 cursor-pointer text-sm transition-colors duration-150","hover:bg-[var(--select-dropdown-hover)]",l===e.value&&"bg-[var(--select-dropdown-selected)]"),onMouseDown:()=>ne(e.value)},e.label))),L&&t.createElement("span",{className:"text-red-500 text-xs mt-1 block"},L))});D.displayName="Select";D.__docgenInfo={description:"",methods:[],displayName:"Select",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"SelectOption"}],raw:"SelectOption[]"},description:""},containerClassName:{required:!1,tsType:{name:"string"},description:""},isClearable:{required:!1,tsType:{name:"boolean"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},filterPlaceholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Digite para filtrar..."',computed:!1}},caseSensitive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},filterFunction:{required:!1,tsType:{name:"signature",type:"function",raw:"(option: SelectOption, searchTerm: string) => boolean",signature:{arguments:[{type:{name:"SelectOption"},name:"option"},{type:{name:"string"},name:"searchTerm"}],return:{name:"boolean"}}},description:""}}};export{D as S};
