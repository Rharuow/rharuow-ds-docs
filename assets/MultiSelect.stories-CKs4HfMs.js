import{j as t,c}from"./utils-DLq8OvKD.js";import{r as d}from"./iframe-BGc9J08Z.js";import{u as z,a as B,b as A,F as H}from"./index.esm-6755tLD6.js";const f=d.forwardRef(({name:l,label:m,options:x,className:M,containerClassName:V,isClearable:E,onFocus:g,onBlur:y,...a},W)=>{var C,S,N;const[_,i]=d.useState(!1),[b,h]=d.useState(!1),p=d.useRef(null),s=z(),w=s==null?void 0:s.control,L=w&&l?B({control:w,name:l}):void 0,n=a.value??L??[],j=(N=(S=(C=s==null?void 0:s.formState)==null?void 0:C.errors)==null?void 0:S[l])==null?void 0:N.message,R=_||n&&n.length>0;d.useEffect(()=>{const e=r=>{p.current&&!p.current.contains(r.target)&&(h(!1),i(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const T=()=>{h(e=>!e),i(!0)},q=e=>{i(!0),g&&g(e)},I=e=>{y&&y(e)},P=e=>{var u;let r;n.includes(e)?r=n.filter(v=>v!==e):r=[...n,e],s&&l&&s.setValue(l,r),a.onChange&&((u=a.onChange)==null||u.call(a,{target:{value:r}})),i(!0)},D=e=>{var r;e.stopPropagation(),s&&l&&s.setValue(l,[]),a.onChange&&((r=a.onChange)==null||r.call(a,{target:{value:[]}})),h(!1),i(!1)};return t.jsxs("div",{className:c("relative",V),ref:p,children:[t.jsxs("div",{id:a.id||l,tabIndex:0,role:"button","aria-haspopup":"listbox","aria-expanded":b,className:c("peer flex items-center h-12 w-full border border-[var(--primary,#2563eb)] rounded-md bg-[var(--input-bg,#fff)] text-[var(--input-text,#222)] px-3 py-3 text-sm transition focus:outline-none focus:border-[var(--primary,#2563eb)] disabled:cursor-not-allowed disabled:opacity-50 appearance-none cursor-pointer relative",M),onClick:T,onFocus:q,onBlur:I,ref:W,children:[t.jsx("div",{className:"flex flex-nowrap gap-1 items-center min-h-[1.5rem] w-full overflow-x-auto",style:{scrollbarWidth:"none"},children:n&&n.length>0?x.filter(e=>n.includes(e.value)).map(e=>t.jsxs("span",{className:"flex items-center border border-blue-200 bg-blue-50 text-blue-700 rounded-2xl px-3 py-1 text-xs shadow-sm mr-1 gap-2",style:{maxWidth:"140px"},children:[t.jsx("span",{className:"truncate",title:e.label,children:e.label}),t.jsx("button",{type:"button",className:"ml-1 text-blue-400 hover:text-red-500 focus:outline-none w-4 h-4 flex items-center justify-center rounded-full transition-colors duration-150","aria-label":`Remover ${e.label}`,tabIndex:-1,onClick:r=>{r.stopPropagation();const u=n.filter(v=>v!==e.value);s&&l&&s.setValue(l,u),a.onChange&&a.onChange({target:{value:u}})},children:t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M3 3L9 9M9 3L3 9",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]},e.value)):t.jsx("span",{className:"text-gray-400 text-sm",children:"Selecione..."})}),E&&n&&n.length>0&&t.jsx("button",{type:"button",tabIndex:-1,"aria-label":"Limpar seleção",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 bg-transparent p-1 rounded-full focus:outline-none",onClick:D,children:"✕"})]}),m&&t.jsx("label",{htmlFor:a.id||l,className:c("absolute left-3 z-10 origin-[0] cursor-text select-none text-sm text-gray-400 transition-all duration-200",R?"top-0 scale-90 -translate-y-1 text-xs text-blue-400 p-1 rounded-full bg-white":"top-3 scale-100 translate-y-0.5"),children:m}),t.jsx("div",{className:c("absolute left-0 w-full mt-1 rounded-md shadow-lg bg-white z-20 transition-all duration-200 overflow-hidden",b?"border border-[var(--primary,#2563eb)] max-h-36 opacity-100 scale-100":"max-h-0 opacity-0 scale-95 pointer-events-none"),style:{maxHeight:b?"9.5rem":"0",overflowY:x.length>3?"auto":"hidden"},children:x.map(e=>t.jsxs("div",{className:c("px-3 py-2 cursor-pointer hover:bg-blue-50 text-sm flex items-center gap-2",n.includes(e.value)&&"bg-blue-100 font-semibold"),onMouseDown:()=>P(e.value),children:[t.jsx("input",{type:"checkbox",checked:n.includes(e.value),readOnly:!0,className:"accent-blue-500"}),e.label]},e.value))}),j&&t.jsx("span",{className:"text-red-500 text-xs mt-1 block",children:j})]})});f.displayName="MultiSelect";f.__docgenInfo={description:"",methods:[],displayName:"MultiSelect",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"MultiSelectOption"}],raw:"MultiSelectOption[]"},description:""},containerClassName:{required:!1,tsType:{name:"string"},description:""},isClearable:{required:!1,tsType:{name:"boolean"},description:""}}};const G={title:"Components/MultiSelect",component:f,argTypes:{isClearable:{control:"boolean",description:"Exibe botão para limpar a seleção",defaultValue:!1},label:{control:"text",defaultValue:"Selecione uma ou mais opções"},options:{control:"object",defaultValue:[{label:"Opção 1",value:"1"},{label:"Opção 2",value:"2"},{label:"Opção 3",value:"3"},{label:"Opção 4",value:"4"},{label:"Opção 5",value:"5"}]},name:{control:"text",defaultValue:"multiSelect"}}},o=l=>{const m=A({defaultValues:{multiSelect:[]}});return t.jsx(H,{...m,children:t.jsx("form",{style:{maxWidth:320},children:t.jsx(f,{...l})})})};o.args={name:"multiSelect",label:"Selecione uma ou mais opções",options:[{label:"Opção 1",value:"1"},{label:"Opção 2",value:"2"},{label:"Opção 3",value:"3"},{label:"Opção 4",value:"4"},{label:"Opção 5",value:"5"}],isClearable:!1};o.__docgenInfo={description:"",methods:[],displayName:"Default"};var O,F,k;o.parameters={...o.parameters,docs:{...(O=o.parameters)==null?void 0:O.docs,source:{originalSource:`args => {
  const methods: UseFormReturn<FormValues> = useForm<FormValues>({
    defaultValues: {
      multiSelect: []
    }
  });
  return <FormProvider {...methods}>
      <form style={{
      maxWidth: 320
    }}>
        <MultiSelect {...args} />
      </form>
    </FormProvider>;
}`,...(k=(F=o.parameters)==null?void 0:F.docs)==null?void 0:k.source}}};const J=["Default"];export{o as Default,J as __namedExportsOrder,G as default};
