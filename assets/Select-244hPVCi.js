import{j as r,c as s}from"./utils-DLq8OvKD.js";import{r as c}from"./iframe-BH0FnrdN.js";import{u as L,a as z}from"./index.esm-C8SzPwbq.js";const N=c.forwardRef(({name:a,label:d,options:u,className:j,containerClassName:S,isClearable:k,onFocus:x,onBlur:b,...n},q)=>{var g,y,w,C;const[E,o]=c.useState(!1),[p,m]=c.useState(!1),f=c.useRef(null),t=L(),h=t==null?void 0:t.control,F=h&&a?z({control:h,name:a}):void 0,l=n.value??F??"",v=(w=(y=(g=t==null?void 0:t.formState)==null?void 0:g.errors)==null?void 0:y[a])==null?void 0:w.message,T=E||!!l;c.useEffect(()=>{const e=i=>{f.current&&!f.current.contains(i.target)&&(m(!1),o(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const O=()=>{m(e=>!e),o(!0)},R=e=>{o(!0),x&&x(e)},I=e=>{b&&b(e)};return r.jsxs("div",{className:s("relative",S),ref:f,children:[r.jsxs("div",{id:n.id||a,tabIndex:0,role:"button","aria-haspopup":"listbox","aria-expanded":p,className:s("peer flex items-center h-12 w-full border border-[var(--primary,#2563eb)] rounded-md bg-[var(--input-bg,#fff)] text-[var(--input-text,#222)] px-3 py-3 text-sm transition focus:outline-none focus:border-[var(--primary,#2563eb)] disabled:cursor-not-allowed disabled:opacity-50 appearance-none cursor-pointer relative",j),onClick:O,onFocus:R,onBlur:I,ref:q,children:[r.jsx("span",{className:s("block truncate",!l&&"text-gray-400"),children:((C=u.find(e=>e.value===l))==null?void 0:C.label)||!d&&"Selecione..."}),k&&l&&r.jsx("button",{type:"button",tabIndex:-1,"aria-label":"Limpar seleção",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 bg-transparent p-1 rounded-full focus:outline-none",onClick:e=>{if(e.stopPropagation(),t&&a&&t.setValue(a,""),n.onChange){const i={target:{value:""}};n.onChange(i)}m(!1),o(!1)},children:"✕"})]}),d&&r.jsx("label",{htmlFor:n.id||a,className:s("absolute left-3 z-10 origin-[0] cursor-text select-none text-sm text-gray-400 transition-all duration-200",T?"top-0 scale-90 -translate-y-1 text-xs text-[var(--primary,#2563eb)] p-1 rounded-full bg-white":"top-3 scale-100 translate-y-0.5"),children:d}),r.jsx("div",{className:s("absolute left-0 w-full mt-1 rounded-md shadow-lg bg-white z-20 transition-all duration-200 overflow-hidden",p?"border border-[var(--primary,#2563eb)] max-h-36 opacity-100 scale-100":"max-h-0 opacity-0 scale-95 pointer-events-none"),style:{maxHeight:p?"9.5rem":"0",overflowY:u.length>3?"auto":"hidden"},children:u.map(e=>r.jsx("div",{className:s("px-3 py-2 cursor-pointer hover:bg-blue-50 text-sm",l===e.value&&"bg-blue-100"),onMouseDown:()=>{if(t&&a&&t.setValue(a,e.value),n.onChange){const i={target:{value:e.value}};n.onChange(i)}o(!0)},children:e.label},e.value))}),v&&r.jsx("span",{className:"text-red-500 text-xs mt-1 block",children:v})]})});N.displayName="Select";N.__docgenInfo={description:"",methods:[],displayName:"Select",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"SelectOption"}],raw:"SelectOption[]"},description:""},containerClassName:{required:!1,tsType:{name:"string"},description:""},isClearable:{required:!1,tsType:{name:"boolean"},description:""}}};export{N as S};
