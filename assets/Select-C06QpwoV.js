import{r as t}from"./iframe-CllnT1cI.js";import{u as U,a as Z}from"./index.esm-D-xy-1vJ.js";import{c as d}from"./utils-CuF-iVWQ.js";const k=t.forwardRef(({name:r,label:v,options:u,className:O,containerClassName:R,isClearable:V,searchable:s=!1,filterPlaceholder:I="Digite para filtrar...",caseSensitive:y=!1,filterFunction:z,onFocus:g,onBlur:w,...l},D)=>{var T,F,q,L;const[P,c]=t.useState(!1),[n,p]=t.useState(!1),[f,E]=t.useState(""),[b,W]=t.useState({top:0,left:0,width:0}),m=t.useRef(null),Y=t.useRef(null),o=U(),C=o==null?void 0:o.control,_=C&&r?Z({control:C,name:r}):void 0,i=l.value??_??"",S=(q=(F=(T=o==null?void 0:o.formState)==null?void 0:T.errors)==null?void 0:F[r])==null?void 0:q.message,A=z||((e,a)=>{const K=y?e.label:e.label.toLowerCase(),Q=y?a:a.toLowerCase();return K.includes(Q)}),N=f.trim()?u.filter(e=>A(e,f.trim())):u,h=u.find(e=>e.value===i),B=s&&n?f:(h==null?void 0:h.label)||"",H=P||!!i||s&&!!f,x=t.useCallback(()=>{if(m.current&&n){const e=m.current.getBoundingClientRect();W({top:e.bottom+window.scrollY+4,left:e.left+window.scrollX,width:e.width})}},[n]);t.useEffect(()=>{if(x(),n){const e=()=>x(),a=()=>x();return window.addEventListener("resize",e),window.addEventListener("scroll",a,!0),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",a,!0)}}},[n,x]),t.useEffect(()=>{const e=a=>{m.current&&!m.current.contains(a.target)&&(p(!1),c(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const M=()=>{p(e=>!e),c(!0)},X=e=>{c(!0),g&&g(e)},j=e=>{w&&w(e)},G=e=>{E(e.target.value)},J=e=>{if(o&&r&&o.setValue(r,e),l.onChange){const a={target:{value:e}};l.onChange(a)}p(!1),c(!1),E("")};return t.createElement("div",{className:d("relative",R),ref:m},t.createElement("div",{id:l.id||r,tabIndex:0,role:"button","aria-haspopup":"listbox","aria-expanded":n,className:d("peer flex items-center h-12 w-full border border-[var(--primary,#2563eb)] rounded-md bg-[var(--input-bg,#fff)] text-[var(--input-text,#222)] px-3 py-3 text-sm transition focus:outline-none focus:border-[var(--primary,#2563eb)] disabled:cursor-not-allowed disabled:opacity-50 appearance-none cursor-pointer relative",O),onClick:s?void 0:M,onFocus:s?void 0:X,onBlur:s?void 0:j,ref:D},s?t.createElement("input",{ref:Y,type:"text",value:B,onChange:G,onFocus:s?e=>{c(!0),p(!0),g&&g(e)}:void 0,onBlur:s?e=>{w&&w(e)}:void 0,placeholder:v?"":I||"Selecione...",className:d("w-full bg-transparent border-none outline-none text-sm",!i&&!f&&"text-gray-400")}):t.createElement("span",{className:d("block truncate",!i&&"text-gray-400")},((L=u.find(e=>e.value===i))==null?void 0:L.label)||!v&&"Selecione..."),V&&i&&t.createElement("button",{type:"button",tabIndex:-1,"aria-label":"Limpar seleção",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 bg-transparent p-1 rounded-full focus:outline-none",onClick:e=>{if(e.stopPropagation(),o&&r&&o.setValue(r,""),l.onChange){const a={target:{value:""}};l.onChange(a)}p(!1),c(!1)}},"✕")),v&&t.createElement("label",{htmlFor:l.id||r,className:d("absolute left-3 z-10 origin-[0] cursor-text select-none text-sm text-gray-400 transition-all duration-200",H?"top-0 scale-90 -translate-y-1 text-xs text-[var(--primary,#2563eb)] p-1 rounded-full bg-white":"top-3 scale-100 translate-y-0.5")},v),t.createElement("div",{className:d("absolute left-0 w-full mt-1 rounded-md transition-all duration-200 overflow-hidden","bg-[var(--select-dropdown-bg)] border-[var(--select-dropdown-border)] text-[var(--select-dropdown-text)]",n?"border max-h-36 opacity-100 scale-100":"max-h-0 opacity-0 scale-95 pointer-events-none"),style:{maxHeight:n?"9.5rem":"0",overflowY:u.length>3?"auto":"hidden",position:"fixed",top:n?b.top:"auto",left:n?b.left:"auto",width:n?b.width:"auto",zIndex:9999,boxShadow:n?"var(--select-dropdown-shadow)":"none"}},N.length===0?t.createElement("div",{className:"px-3 py-2 text-sm text-gray-500 text-center"},"Nenhuma opção encontrada"):N.map(e=>t.createElement("div",{key:e.value,className:d("px-3 py-2 cursor-pointer text-sm transition-colors duration-150","hover:bg-[var(--select-dropdown-hover)]",i===e.value&&"bg-[var(--select-dropdown-selected)]"),onMouseDown:()=>J(e.value)},e.label))),S&&t.createElement("span",{className:"text-red-500 text-xs mt-1 block"},S))});k.displayName="Select";k.__docgenInfo={description:"",methods:[],displayName:"Select",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"SelectOption"}],raw:"SelectOption[]"},description:""},containerClassName:{required:!1,tsType:{name:"string"},description:""},isClearable:{required:!1,tsType:{name:"boolean"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},filterPlaceholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Digite para filtrar..."',computed:!1}},caseSensitive:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},filterFunction:{required:!1,tsType:{name:"signature",type:"function",raw:"(option: SelectOption, searchTerm: string) => boolean",signature:{arguments:[{type:{name:"SelectOption"},name:"option"},{type:{name:"string"},name:"searchTerm"}],return:{name:"boolean"}}},description:""}}};export{k as S};
